# NOTE: this is a reference for the environment variables
# to be set for the runner services (if not using cli arguments)
# a .env file will be automatically created
# when the service(s) are started
# keys with value REPLACE_ME will be autogenerated
# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
# Server host and port
WALDIEZ_RUNNER_HOST=localhost
WALDIEZ_RUNNER_PORT=8000
WALDIEZ_RUNNER_DOMAIN_NAME=localhost
#
# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
WALDIEZ_RUNNER_LOG_LEVEL=INFO
#
# Security and CORS
WALDIEZ_RUNNER_FORCE_SSL=True
# Comma-separated list of trusted hosts
WALDIEZ_RUNNER_TRUSTED_HOSTS=localhost,
# Comma-separated list of trusted origins
WALDIEZ_RUNNER_TRUSTED_ORIGINS=http://localhost:3000,http://localhost:8000
WALDIEZ_RUNNER_TRUSTED_ORIGIN_REGEX=
#
# Can be left as REPLACE_ME, will be auto-generated before start
WALDIEZ_RUNNER_SECRET_KEY=REPLACE_ME
#
# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Disable postgres in development to avoid setup complexity
WALDIEZ_RUNNER_POSTGRES=False
# PostgreSQL settings (used when WALDIEZ_RUNNER_POSTGRES=true)
WALDIEZ_RUNNER_DB_HOST=db
WALDIEZ_RUNNER_DB_PORT=5432
WALDIEZ_RUNNER_DB_USER=db_user
WALDIEZ_RUNNER_DB_PASSWORD=db_password
WALDIEZ_RUNNER_DB_NAME=db_name
# Complete database URL (optional, auto-generated if not provided)
WALDIEZ_RUNNER_DB_URL=
#
# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# if dev/False, a fake server can be used from fakeredis
WALDIEZ_RUNNER_REDIS=True
# Assuming the container name is "redis"
WALDIEZ_RUNNER_REDIS_HOST=redis
WALDIEZ_RUNNER_REDIS_PORT=6379
WALDIEZ_RUNNER_REDIS_DB=0
# Redis scheme: redis, rediss (SSL), unix
WALDIEZ_RUNNER_REDIS_SCHEME=redis
# empty string can be used if no password
# but make sure the env key is set
WALDIEZ_RUNNER_REDIS_PASSWORD=redis_password
# Complete Redis URL (optional, auto-generated if not provided)
WALDIEZ_RUNNER_REDIS_URL=
#
# =============================================================================
# AUTHENTICATION CONFIGURATION
# =============================================================================
# Local JWT Authentication (HS256)
WALDIEZ_RUNNER_USE_LOCAL_AUTH=true
# Can be left as REPLACE_ME, will be auto-generated
WALDIEZ_RUNNER_LOCAL_CLIENT_ID=REPLACE_ME
WALDIEZ_RUNNER_LOCAL_CLIENT_SECRET=REPLACE_ME
# OIDC/OAuth2 Authentication
WALDIEZ_RUNNER_USE_OIDC_AUTH=false
WALDIEZ_RUNNER_OIDC_ISSUER_URL=
WALDIEZ_RUNNER_OIDC_AUDIENCE=
WALDIEZ_RUNNER_OIDC_CLIENT_ID=
WALDIEZ_RUNNER_OIDC_CLIENT_SECRET=
# On Keycloak it would be something like:
# https://auth.example.com/realms/realm_name/protocol/openid-connect/certs
WALDIEZ_RUNNER_OIDC_JWKS_URL=
# JWKS cache TTL in seconds (1-3600)
WALDIEZ_RUNNER_OIDC_JWKS_CACHE_TTL=900
# External Authentication
WALDIEZ_RUNNER_ENABLE_EXTERNAL_AUTH=false
WALDIEZ_RUNNER_EXTERNAL_AUTH_VERIFY_URL=https://example.com/verify
WALDIEZ_RUNNER_EXTERNAL_AUTH_SECRET=REPLACE_ME
# Task Permission Control
WALDIEZ_RUNNER_TASK_PERMISSION_VERIFY_URL=https://example.com/task-permission
WALDIEZ_RUNNER_TASK_PERMISSION_SECRET=REPLACE_ME
#
# =============================================================================
# STORAGE BACKEND CONFIGURATION
# =============================================================================
# if local, the files will be stored in the local filesystem
# only local is supported for now (s3 to be added)
WALDIEZ_RUNNER_STORAGE_BACKEND=local
# not yer tested with external auth
WALDIEZ_RUNNER_USE_LOCAL_AUTH=True
# Can be left as REPLACE_ME, will be replaced before start
WALDIEZ_RUNNER_LOCAL_CLIENT_ID=REPLACE_ME
WALDIEZ_RUNNER_LOCAL_CLIENT_SECRET=REPLACE_ME
WALDIEZ_RUNNER_USE_OIDC_AUTH=False
WALDIEZ_RUNNER_OIDC_ISSUER_URL=
WALDIEZ_RUNNER_OIDC_AUDIENCE=
# on keycloak it would be sth like:
# https://auth.example.com/realms/realm_name/protocol/openid-connect/certs
WALDIEZ_RUNNER_OIDC_JWKS_URL=
WALDIEZ_RUNNER_OIDC_JWKS_CACHE_TTL=900
#
# =============================================================================
# TASK MANAGEMENT
# =============================================================================
# Max concurrent active jobs per client. <=0 means no limit.
WALDIEZ_RUNNER_MAX_JOBS=5
# Default input timeout for tasks (can be overridden when submitting a task)
WALDIEZ_RUNNER_INPUT_TIMEOUT=180
# Days to keep completed tasks (<=0: delete immediately after completion)
WALDIEZ_RUNNER_KEEP_TASK_FOR_DAYS=0
# Maximum task duration in seconds (<=0: no limit)
WALDIEZ_RUNNER_MAX_TASK_DURATION=3600
# Skip installing dependencies before starting the task.
WALDIEZ_RUNNER_SKIP_DEPS=False
# Additional packages, space separated (workflow specific?) to install on startup
# on server startup (not on task startup)
# no quotes, just the deps in one line
# e.g.: WALDIEZ_RUNNER_EXTRA_PACKAGES=chromadb docling>=2.15.1,<3 ag2[wikipedia]==0.9.9
WALDIEZ_RUNNER_EXTRA_PACKAGES=
